!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1416)}({1416:function(t,e,i){t.exports=i(1417)},1417:function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"Loader",(function(){return o})),i.d(n,"Menu",(function(){return a})),i.d(n,"Leaderboard",(function(){return h})),i.d(n,"Game",(function(){return d})),i.d(n,"Maze",(function(){return m})),i.d(n,"Scoreboard",(function(){return y})),i.d(n,"ChooseName",(function(){return b}));var s={};i.r(s),i.d(s,"width",(function(){return x})),i.d(s,"height",(function(){return w})),i.d(s,"zoom",(function(){return k})),i.d(s,"resolution",(function(){return v})),i.d(s,"type",(function(){return S})),i.d(s,"pixelArt",(function(){return O})),i.d(s,"transparent",(function(){return T})),i.d(s,"canvasStyle",(function(){return K})),i.d(s,"backgroundColor",(function(){return G})),i.d(s,"physics",(function(){return I})),i.d(s,"loader",(function(){return L})),i.d(s,"plugins",(function(){return M})),i.d(s,"title",(function(){return P.a})),i.d(s,"version",(function(){return P.c})),i.d(s,"url",(function(){return P.b})),i.d(s,"scene",(function(){return R}));var r={image:"font",width:16,height:16,chars:"0123456789   ABCDEFGHIJKLMNOPQRSTUVWXYZ",offset:{x:0,y:0},spacing:{x:0,y:0},charsPerRow:13};class o extends Phaser.Scene{constructor(){super({key:"Loader"})}preload(){this.load.image(["body","food","font","frame","title"])}create(){this.cache.bitmapFont.add(r.image,Phaser.GameObjects.RetroFont.Parse(this,r)),this.scene.start("Menu")}}class a extends Phaser.Scene{constructor(){super({key:"Menu"})}create(){const t=this.cameras.main.width/2,e=this.cameras.main.height/2;let i=document.getElementById("snakeName").value;this.add.image(t,e-80,"title");const n=this.add.bitmapText(t,e+20,"font","START").setOrigin(.5,1);this.add.tween({targets:[n],ease:t=>t<.5?0:1,duration:250,yoyo:!0,repeat:-1,alpha:0}),this.add.zone(n.x-n.width*n.originX-16,n.y-n.height*n.originY-16,n.width+32,n.height+32).setOrigin(0,0).setInteractive().once("pointerup",()=>{i?this.scene.start("Game"):this.scene.start("ChooseName")}),this.add.zone();const{highScore:s}=this.scene.get("Game"),r=this.add.bitmapText(t,e+80,"font","LEADERBOARD").setOrigin(.5,2);this.add.zone(r.x-r.width*r.originX-16,r.y-r.height*r.originY-16,r.width+32,r.height+32).setOrigin(0,0).setInteractive().once("pointerup",()=>this.scene.start("Leaderboard")),this.add.zone(),this.add.bitmapText(t,e+100,"font","YOUR HIGH SCORE").setOrigin(.5,1),this.add.bitmapText(t,e+150,"font",`${s} POINTS`).setOrigin(.5,2)}}class h extends Phaser.Scene{constructor(){super({key:"Leaderboard"})}create(){const t=this.cameras.main.width/2,e=this.cameras.main.height/2;let i;axios.get("https://snake.sneakerindustry.ro:5000/leaderboard").then(t=>{i=t.data}).then(n=>{i.map((i,n)=>{this.add.bitmapText(t,e+20*n,"font",`${n+1} ${i.name.toUpperCase()} ${i.score}`).setOrigin(.5,10-n)})});const n=this.add.bitmapText(t-300,e+160,"font","BACK");this.add.zone(n.x-n.width*n.originX-16,n.y-n.height*n.originY-16,n.width+32,n.height+32).setOrigin(0,0).setInteractive().once("pointerup",()=>{this.scene.stop("Leaderboard"),this.scene.start("Menu")})}}class d extends Phaser.Scene{preload(){}constructor(){super({key:"Game"}),this.highScore=0}init(){this.points=0}create(){this.add.image(0,0,"frame").setOrigin(0,0);const t=this.scene.get("Scoreboard"),e=this.scene.get("Maze");this.scene.get("Leaderboard");this.scene.launch(t,{gameScene:this}).launch(e),this.food=e.addFood(3,4),this.snake=e.addSnake(8,8),this.cursors=this.input.keyboard.addKeys({leftKey:Phaser.Input.Keyboard.KeyCodes.LEFT,rightKey:Phaser.Input.Keyboard.KeyCodes.RIGHT,upKey:Phaser.Input.Keyboard.KeyCodes.UP,downKey:Phaser.Input.Keyboard.KeyCodes.DOWN})}update(t){this.snake.alive&&(this.updateInput(),this.updateLogic(t))}updateInput(){const{leftKey:t,rightKey:e,upKey:i,downKey:n}=this.cursors;Phaser.Input.Keyboard.JustDown(t)?this.snake.turnSnake("left"):Phaser.Input.Keyboard.JustDown(e)?this.snake.turnSnake("right"):Phaser.Input.Keyboard.JustDown(i)?this.snake.turnSnake("up"):Phaser.Input.Keyboard.JustDown(n)&&this.snake.turnSnake("down")}updateLogic(t){const{food:e,snake:i}=this;i.update(t)&&i.collideWithFood(e,this.points)&&(this.updatePoints(),e.reposition(i)),i.alive||this.endGame()}endGame(){this.events.emit("snake-died"),this.highScore=Math.max(this.points,this.highScore),this.snake.name=document.getElementById("snakeName").value,axios.post("https://snake.sneakerindustry.ro:5000/scores",{name:this.snake.name.toUpperCase(),score:this.points}).then(t=>console.log("posted")),this.time.delayedCall(2500,()=>{this.scene.stop("Scoreboard").stop("Maze").stop("Leaderboard").start("Menu")})}updatePoints(){this.points+=5,this.events.emit("food-eaten",this.points)}}const c=39,u=20,p=16;class l extends Phaser.GameObjects.Image{constructor(t,e,i){super(t,e*p,i*p,"food").setOrigin(0),t.children.add(this)}reposition(t){const e=Array.from({length:u},()=>Array.from({length:c},()=>!0));t.updateGrid(e);const i=[];for(let t=0;t<u;t++)for(let n=0;n<c;n++)!0===e[t][n]&&i.push({x:n,y:t});if(i.length>0){let t=Phaser.Math.RND.pick(i);return this.setPosition(t.x*p,t.y*p),!0}return!1}}var f={left:"left",right:"right",up:"up",down:"down"};class g{constructor(t,e,i){this.body=t.add.group({defaultKey:"body",createCallback:t=>t.setOrigin(0)}),this.head=this.body.create(e*p,i*p),this.direction=new Phaser.Geom.Point(p,0),this.directionPath=f.right,this.headPosition=new Phaser.Geom.Point(0,0),this.tailPosition=new Phaser.Geom.Point(0,0),this.name=null,this.alive=!0,this.updated=!0,this.moveTime=0,this.moveDelay=100}update(t){return t>=this.moveTime&&(this.updated=!0,this.move(t))}turnSnake(t){if(this.updated){switch(t){case"left":if("up"==this.directionPath&&this.turnLeft(),"down"==this.directionPath&&this.turnRight(),"left"==this.directionPath||"right"==this.directionPath)return;this.directionPath="left";break;case"right":if("up"==this.directionPath&&this.turnRight(),"down"==this.directionPath&&this.turnLeft(),"left"==this.directionPath||"right"==this.directionPath)return;this.directionPath="right";break;case"up":if("left"==this.directionPath&&this.turnRight(),"right"==this.directionPath&&this.turnLeft(),"up"==this.directionPath||"down"==this.directionPath)return;this.directionPath="up";break;case"down":if("left"==this.directionPath&&this.turnLeft(),"right"==this.directionPath&&this.turnRight(),"up"==this.directionPath||"down"==this.directionPath)return;this.directionPath="down"}this.updated=!1}}turnLeft(){this.updated&&(this.direction.setTo(this.direction.y,-this.direction.x),this.updated=!1)}turnRight(){this.updated&&(this.direction.setTo(-this.direction.y,this.direction.x),this.updated=!1)}hitBody(){return Phaser.Actions.GetFirst(this.body.children.entries,{x:this.head.x,y:this.head.y},1)}move(t){return this.headPosition.setTo(Phaser.Math.Wrap(this.head.x+this.direction.x,0,c*p),Phaser.Math.Wrap(this.head.y+this.direction.y,0,u*p)),Phaser.Actions.ShiftPosition(this.body.children.entries,this.headPosition.x,this.headPosition.y,1,this.tailPosition),this.hitBody()?(this.alive=!1,!1):(this.moveTime=t+this.moveDelay,!0)}grow(){this.body.create(this.tailPosition.x,this.tailPosition.y)}collideWithFood(t,e){return this.head.x===t.x&&this.head.y===t.y&&(this.grow(),this.moveDelay>20&&e%25==0&&(this.moveDelay-=5),!0)}updateGrid(t){for(const e of this.body.getChildren()){const i=e.x/p;t[e.y/p][i]=!1}return t}}class m extends Phaser.Scene{constructor(){super({key:"Maze",cameras:[{x:p/2,y:2*p,width:c*p,height:u*p}]})}addFood(t=0,e=t){return new l(this,t,e)}addSnake(t=0,e=0){return new g(this,t,e)}}class y extends Phaser.Scene{constructor(){super({key:"Scoreboard",cameras:[{x:p/2,y:p/2,width:c*p,height:p}]})}init({gameScene:t}){t.events.on("food-eaten",t=>this.setScore(t)).on("snake-died",()=>this.showGameOver())}create(){this.scoreLabel=this.add.bitmapText(0,0,r.image,"0"),this.gameOverLabel=this.add.bitmapText(c*p,0,r.image,"GAME OVER").setOrigin(1,0).setVisible(!1)}setScore(t){this.scoreLabel.setText(String(t))}showGameOver(){this.gameOverLabel.setVisible(!0)}}class b extends Phaser.Scene{constructor(){super({key:"ChooseName"})}create(){const t=this.cameras.main.width/2,e=this.cameras.main.height/2;this.add.bitmapText(t-120,e-60,"font","ENTER YOUR NAME:");let i=document.getElementById("snakeName");i.style.display="block";const n=this.add.bitmapText(t-50,e+60,"font","SUBMIT");this.add.zone(n.x-n.width*n.originX-16,n.y-n.height*n.originY-16,n.width+32,n.height+32).setOrigin(0,0).setInteractive().once("pointerup",()=>{this.scene.stop("ChooseName"),this.scene.start("Game"),i.style.display="none"})}}var P=i(153);const x=640,w=360,k=1,v=1,S=Phaser.AUTO,O=!1,T=!1,K="display: block; margin: 0 auto;",G="#bfcc00",I={default:!1},L={path:"assets/"},M={global:[],scene:[]},R=Object.values(n);function C(){return new Phaser.Game(s)}i.d(e,"boot",(function(){return C})),C()},153:function(t){t.exports=JSON.parse('{"a":"SNKR Snake Game","c":"1.0.0","b":"/dist"}')}});
//# sourceMappingURL=app-79c99151685002addf94.bundle.js.map